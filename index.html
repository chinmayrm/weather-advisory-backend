<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Smart Weather Advisory</title>
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/5.3.3/lux/bootstrap.min.css"
  />
  <style>
    body { padding-top: 4rem; }
    #result { white-space: pre-wrap; }
  </style>
</head>
<body class="bg-light">
  <div class="container text-center">
    <h1 class="mb-4">🌦️ Smart Weather Advisory</h1>

    <div class="input-group mb-3">
      <input id="city" type="text" class="form-control" placeholder="Enter city (e.g. Gadag)">
      <button class="btn btn-primary" onclick="getWeather()">Get Advisory</button>
    </div>

    <div id="result" class="alert alert-secondary d-none"></div>
  </div>

  <script>
    async function getWeather() {
      const city = document.getElementById("city").value.trim();
      if (!city) return alert("Please enter a city name!");

      const resBox = document.getElementById("result");
      resBox.classList.add("d-none");

      try {
        const url = `https://weather-advisory-backend.onrender.com/weather?city=${encodeURIComponent(city)}`;
        const data = await fetch(url).then(r => r.json());

        if (data.error) throw new Error(data.error);

        resBox.innerHTML =
          `🌍 City: ${data.city}\n` +
          `🌡️ Temp: ${data.temperature} °C\n` +
          `💧 Humidity: ${data.humidity}%\n` +
          `☁️ Condition: ${data.condition}\n\n` +
          `📣 Advisory: ${data.advisory}`;
        resBox.className = "alert alert-success";
      } catch (err) {
        resBox.textContent = "Error: " + err.message;
        resBox.className = "alert alert-danger";
      }
      resBox.classList.remove("d-none");
    }
  </script>
</body>
</html>
